(()=>{"use strict";new Set;const t="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;class e{_listeners="WeakMap"in t?new WeakMap:void 0;_observer=void 0;options;constructor(t){this.options=t}observe(t,e){return this._listeners.set(t,e),this._getObserver().observe(t,this.options),()=>{this._listeners.delete(t),this._observer.unobserve(t)}}_getObserver(){return this._observer??(this._observer=new ResizeObserver((t=>{for(const n of t)e.entries.set(n.target,n),this._listeners.get(n.target)?.(n)})))}}e.entries="WeakMap"in t?new WeakMap:void 0;let n,l=!1;function s(t,e){t.appendChild(e)}function o(t,e,n){t.insertBefore(e,n||null)}function a(t){t.parentNode&&t.parentNode.removeChild(t)}function r(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function i(t){return document.createElement(t)}function c(t){return document.createTextNode(t)}function u(){return c(" ")}function d(){return c("")}function f(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function h(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function b(t,e){e=""+e,t.data!==e&&(t.data=e)}function $(t,e){t.value=null==e?"":e}function m(t,e,n,l){null==n?t.style.removeProperty(e):t.style.setProperty(e,n,l?"important":"")}function p(t,e,n){for(let n=0;n<t.options.length;n+=1){const l=t.options[n];if(l.__value===e)return void(l.selected=!0)}n&&void 0===e||(t.selectedIndex=-1)}function g(t){const e=t.querySelector(":checked");return e&&e.__value}function v(){}function y(t){return t()}function w(){return Object.create(null)}function k(t){t.forEach(y)}function _(t){return"function"==typeof t}function x(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function C(t){n=t}new Map;const T=[],L=[];let S=[];const E=[],M=Promise.resolve();let N=!1;function O(t){S.push(t)}function A(t){E.push(t)}const R=new Set;let j=0;function q(){if(0!==j)return;const t=n;do{try{for(;j<T.length;){const t=T[j];j++,C(t),D(t.$$)}}catch(t){throw T.length=0,j=0,t}for(C(null),T.length=0,j=0;L.length;)L.pop()();for(let t=0;t<S.length;t+=1){const e=S[t];R.has(e)||(R.add(e),e())}S.length=0}while(T.length);for(;E.length;)E.pop()();N=!1,R.clear(),C(t)}function D(t){if(null!==t.fragment){t.update(),k(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(O)}}const J=new Set;let P,z;function H(){P={r:0,c:[],p:P}}function I(){P.r||k(P.c),P=P.p}function B(t,e){t&&t.i&&(J.delete(t),t.i(e))}function U(t,e,n,l){if(t&&t.o){if(J.has(t))return;J.add(t),P.c.push((()=>{J.delete(t),l&&(n&&t.d(1),l())})),t.o(e)}else l&&l()}function K(t){return void 0!==t?.length?t:Array.from(t)}function W(t,e){U(t,1,1,(()=>{e.delete(t.key)}))}function F(t,e,n,l,s,o,a,r,i,c,u,d){let f=t.length,h=o.length,b=f;const $={};for(;b--;)$[t[b].key]=b;const m=[],p=new Map,g=new Map,v=[];for(b=h;b--;){const t=d(s,o,b),r=n(t);let i=a.get(r);i?l&&v.push((()=>i.p(t,e))):(i=c(r,t),i.c()),p.set(r,m[b]=i),r in $&&g.set(r,Math.abs(b-$[r]))}const y=new Set,w=new Set;function _(t){B(t,1),t.m(r,u),a.set(t.key,t),u=t.first,h--}for(;f&&h;){const e=m[h-1],n=t[f-1],l=e.key,s=n.key;e===n?(u=e.first,f--,h--):p.has(s)?!a.has(l)||y.has(l)?_(e):w.has(s)?f--:g.get(l)>g.get(s)?(w.add(l),_(e)):(y.add(s),f--):(i(n,a),f--)}for(;f--;){const e=t[f];p.has(e.key)||i(e,a)}for(;h;)_(m[h-1]);return k(v),m}function G(t,e,n){const l=t.$$.props[e];void 0!==l&&(t.$$.bound[l]=n,n(t.$$.ctx[l]))}function Z(t){t&&t.c()}function Q(t,e,n){const{fragment:l,after_update:s}=t.$$;l&&l.m(e,n),O((()=>{const e=t.$$.on_mount.map(y).filter(_);t.$$.on_destroy?t.$$.on_destroy.push(...e):k(e),t.$$.on_mount=[]})),s.forEach(O)}function X(t,e){const n=t.$$;null!==n.fragment&&(function(t){const e=[],n=[];S.forEach((l=>-1===t.indexOf(l)?e.push(l):n.push(l))),n.forEach((t=>t())),S=e}(n.after_update),k(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function V(t,e,s,o,r,i,c=null,u=[-1]){const d=n;C(t);const f=t.$$={fragment:null,ctx:[],props:i,update:v,not_equal:r,bound:w(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(d?d.$$.context:[])),callbacks:w(),dirty:u,skip_bound:!1,root:e.target||d.$$.root};c&&c(f.root);let h=!1;if(f.ctx=s?s(t,e.props||{},((e,n,...l)=>{const s=l.length?l[0]:n;return f.ctx&&r(f.ctx[e],f.ctx[e]=s)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](s),h&&function(t,e){-1===t.$$.dirty[0]&&(T.push(t),N||(N=!0,M.then(q)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(t,e)),n})):[],f.update(),h=!0,k(f.before_update),f.fragment=!!o&&o(f.ctx),e.target){if(e.hydrate){l=!0;const t=(b=e.target,Array.from(b.childNodes));f.fragment&&f.fragment.l(t),t.forEach(a)}else f.fragment&&f.fragment.c();e.intro&&B(t.$$.fragment),Q(t,e.target,e.anchor),l=!1,q()}var b;C(d)}function Y(t,e,n,l){const s=n[t]?.type;if(e="Boolean"===s&&"boolean"!=typeof e?null!=e:e,!l||!n[t])return e;if("toAttribute"===l)switch(s){case"Object":case"Array":return null==e?null:JSON.stringify(e);case"Boolean":return e?"":null;case"Number":return null==e?null:e;default:return e}else switch(s){case"Object":case"Array":return e&&JSON.parse(e);case"Boolean":default:return e;case"Number":return null!=e?+e:e}}new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]),"function"==typeof HTMLElement&&(z=class extends HTMLElement{$$ctor;$$s;$$c;$$cn=!1;$$d={};$$r=!1;$$p_d={};$$l={};$$l_u=new Map;constructor(t,e,n){super(),this.$$ctor=t,this.$$s=e,n&&this.attachShadow({mode:"open"})}addEventListener(t,e,n){if(this.$$l[t]=this.$$l[t]||[],this.$$l[t].push(e),this.$$c){const n=this.$$c.$on(t,e);this.$$l_u.set(e,n)}super.addEventListener(t,e,n)}removeEventListener(t,e,n){if(super.removeEventListener(t,e,n),this.$$c){const t=this.$$l_u.get(e);t&&(t(),this.$$l_u.delete(e))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){if(await Promise.resolve(),!this.$$cn||this.$$c)return;function t(t){return()=>{let e;return{c:function(){e=i("slot"),"default"!==t&&h(e,"name",t)},m:function(t,n){o(t,e,n)},d:function(t){t&&a(e)}}}}const e={},n=function(t){const e={};return t.childNodes.forEach((t=>{e[t.slot||"default"]=!0})),e}(this);for(const s of this.$$s)s in n&&(e[s]=[t(s)]);for(const r of this.attributes){const c=this.$$g_p(r.name);c in this.$$d||(this.$$d[c]=Y(c,r.value,this.$$p_d,"toProp"))}for(const u in this.$$p_d)u in this.$$d||void 0===this[u]||(this.$$d[u]=this[u],delete this[u]);this.$$c=new this.$$ctor({target:this.shadowRoot||this,props:{...this.$$d,$$slots:e,$$scope:{ctx:[]}}});const l=()=>{this.$$r=!0;for(const t in this.$$p_d)if(this.$$d[t]=this.$$c.$$.ctx[this.$$c.$$.props[t]],this.$$p_d[t].reflect){const e=Y(t,this.$$d[t],this.$$p_d,"toAttribute");null==e?this.removeAttribute(this.$$p_d[t].attribute||t):this.setAttribute(this.$$p_d[t].attribute||t,e)}this.$$r=!1};this.$$c.$$.after_update.push(l),l();for(const d in this.$$l)for(const f of this.$$l[d]){const b=this.$$c.$on(d,f);this.$$l_u.set(f,b)}this.$$l={}}}attributeChangedCallback(t,e,n){this.$$r||(t=this.$$g_p(t),this.$$d[t]=Y(t,n,this.$$p_d,"toProp"),this.$$c?.$set({[t]:this.$$d[t]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then((()=>{this.$$cn||(this.$$c.$destroy(),this.$$c=void 0)}))}$$g_p(t){return Object.keys(this.$$p_d).find((e=>this.$$p_d[e].attribute===t||!this.$$p_d[e].attribute&&e.toLowerCase()===t))||t}});class tt{$$=void 0;$$set=void 0;$destroy(){X(this,1),this.$destroy=v}$on(t,e){if(!_(e))return v;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function et(t){let e,n,l,r,u=t[0].name+"";return{c(){e=i("button"),n=c(u),h(e,"class","btn btn-light border-dark m-1")},m(a,i){o(a,e,i),s(e,n),l||(r=f(e,"click",t[2]),l=!0)},p(t,[e]){1&e&&u!==(u=t[0].name+"")&&b(n,u)},i:v,o:v,d(t){t&&a(e),l=!1,r()}}}function nt(t,e,n){let{table:l}=e,{handleRoll:s}=e;return t.$$set=t=>{"table"in t&&n(0,l=t.table),"handleRoll"in t&&n(1,s=t.handleRoll)},[l,s,()=>s(l)]}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");const lt=class extends tt{constructor(t){super(),V(this,t,nt,et,x,{table:0,handleRoll:1})}},st=["0","1","2","3","4","5","6","7","8","9"],ot=new class{roll(t){let e=this.tokenize(t);return this.execute(e)}tokenize(t){let e=[],n=0;for(;n<t.length;){let s={value:t[n]};if(l=t[n],st.indexOf(l)>=0){let l=e.length>0?e[e.length-1]:{};if("digit"==l.type){l.value+=t[n++];continue}s.type="digit"}"d"==t[n]&&(s.type="die"),"+"==t[n]&&(s.type="plus"),"-"==t[n]&&(s.type="minus"),e.push(s),n++}var l;return e}execute(t){let e=Number(t[0].value),n=Number(t[2].value),l=5==t.length&&"plus"==t[3].type?Number(t[4].value):0,s=5==t.length&&"minus"==t[3].type?Number(t[4].value):0,o=0;for(;e>0;)o+=Math.floor(Math.random()*n+1),e--;return o+l-s}};let at=({table:t,modifier:e,tables:n})=>{console.log(`Rolling ${t.roll} + ${e} on ${t.name}`);let l=ot.roll(t.roll+e),s=Math.max(...t.entries.map((t=>t.max))),o=Math.min(...t.entries.map((t=>t.min)));l>s&&(l=s),l<o&&(l=o);let a=t.entries.find((t=>t.min<=l&&t.max>=l));if(!a)return void alert(`Error - rolled ${l} on table ${t.name} (id: ${t.id})`);let r=a.name;a.amount&&(r=`${r} (${ot.roll(a.amount)})`);let i=[{roll:l,table:t.name,description:r}];return a.tables?(a.tables.forEach((t=>{console.log(`finding table with id ${t}`);let l=n.find((e=>e.id==t));console.log(`found table: ${l.name}`),l?i=i.concat(at({table:l,modifier:e,tables:n})):i.push({roll:0,table:null,description:`Could not find table with id ${t}`})})),i):i};const rt={rollOnTable:at};function it(t,e,n){const l=t.slice();return l[16]=e[n],l}function ct(t,e,n){const l=t.slice();return l[19]=e[n],l}function ut(t,e,n){const l=t.slice();return l[22]=e[n],l}function dt(t){let e,n,l,r=t[22]+"";return{c(){e=i("option"),n=c(r),e.__value=l=t[22],$(e,e.__value)},m(t,l){o(t,e,l),s(e,n)},p:v,d(t){t&&a(e)}}}function ft(t){let e,n;return e=new lt({props:{table:t[19],handleRoll:t[8]}}),{c(){Z(e.$$.fragment)},m(t,l){Q(e,t,l),n=!0},p(t,n){const l={};32&n&&(l.table=t[19]),e.$set(l)},i(t){n||(B(e.$$.fragment,t),n=!0)},o(t){U(e.$$.fragment,t),n=!1},d(t){X(e,t)}}}function ht(t){let e,n,l,r,u,d,f,h=t[16].roll+"",$=t[16].table+"",p=t[16].description+"";return{c(){e=i("p"),n=c("Rolled "),l=c(h),r=c(" on "),u=c($),d=c(": "),f=c(p),m(e,"white-space","pre-wrap")},m(t,a){o(t,e,a),s(e,n),s(e,l),s(e,r),s(e,u),s(e,d),s(e,f)},p(t,e){16&e&&h!==(h=t[16].roll+"")&&b(l,h),16&e&&$!==($=t[16].table+"")&&b(u,$),16&e&&p!==(p=t[16].description+"")&&b(f,p)},d(t){t&&a(e)}}}function bt(t){let e,n,l,d,m,g,v,y,w,_,x,C,T,L,S,E,M,N,A,R,j,q,D,J,P,z,W,F,G,Z,Q,X,V,Y,tt,et,nt,lt,st=K(t[6]),ot=[];for(let e=0;e<st.length;e+=1)ot[e]=dt(ut(t,st,e));let at=K(t[5]),rt=[];for(let e=0;e<at.length;e+=1)rt[e]=ft(ct(t,at,e));const bt=t=>U(rt[t],1,1,(()=>{rt[t]=null}));let $t=K(t[4]),mt=[];for(let e=0;e<$t.length;e+=1)mt[e]=ht(it(t,$t,e));return{c(){e=i("div"),n=i("div"),l=i("div"),d=i("div"),m=i("div"),g=i("div"),v=i("div"),y=i("div"),w=i("button"),w.textContent="↓",_=u(),x=i("button"),C=c(t[3]),T=u(),L=i("button"),L.textContent="↑",S=u(),E=i("button"),E.textContent="reset",M=u(),N=i("input"),A=u(),R=i("select"),j=i("option");for(let t=0;t<ot.length;t+=1)ot[t].c();q=u(),D=i("label"),J=i("input"),P=u(),z=i("span"),z.textContent="Top Level Only",W=u(),F=i("div"),G=i("div"),Z=i("div"),Q=i("div");for(let t=0;t<rt.length;t+=1)rt[t].c();X=u(),V=i("div"),Y=i("div"),tt=i("div");for(let t=0;t<mt.length;t+=1)mt[t].c();h(w,"class","btn btn-light border-dark"),h(x,"class","btn btn-dark border-dark"),h(L,"class","btn btn-light border-dark"),h(y,"class","btn-group m-1"),h(E,"class","btn btn-light border-dark m-1"),h(v,"class","d-flex"),h(N,"class","form-control"),h(N,"placeholder","filter"),j.__value="",$(j,j.__value),h(R,"class","form-control"),void 0===t[1]&&O((()=>t[14].call(R))),h(J,"type","checkbox"),h(D,"class","form group w-100"),h(g,"class","card-body"),h(m,"class","card"),h(d,"class","col"),h(l,"class","row"),h(Q,"class","card-body"),h(Z,"class","card"),h(G,"class","col"),h(F,"class","row"),h(n,"class","col-md-6"),h(tt,"class","card-body"),h(Y,"class","card"),h(V,"class","col"),h(e,"class","row")},m(a,r){o(a,e,r),s(e,n),s(n,l),s(l,d),s(d,m),s(m,g),s(g,v),s(v,y),s(y,w),s(y,_),s(y,x),s(x,C),s(y,T),s(y,L),s(v,S),s(v,E),s(g,M),s(g,N),$(N,t[0]),s(g,A),s(g,R),s(R,j);for(let t=0;t<ot.length;t+=1)ot[t]&&ot[t].m(R,null);p(R,t[1],!0),s(g,q),s(g,D),s(D,J),J.checked=t[2],s(D,P),s(D,z),s(n,W),s(n,F),s(F,G),s(G,Z),s(Z,Q);for(let t=0;t<rt.length;t+=1)rt[t]&&rt[t].m(Q,null);s(e,X),s(e,V),s(V,Y),s(Y,tt);for(let t=0;t<mt.length;t+=1)mt[t]&&mt[t].m(tt,null);et=!0,nt||(lt=[f(w,"click",t[10]),f(L,"click",t[11]),f(E,"click",t[12]),f(N,"input",t[13]),f(R,"change",t[14]),f(J,"change",t[15])],nt=!0)},p(t,[e]){if((!et||8&e)&&b(C,t[3]),1&e&&N.value!==t[0]&&$(N,t[0]),64&e){let n;for(st=K(t[6]),n=0;n<st.length;n+=1){const l=ut(t,st,n);ot[n]?ot[n].p(l,e):(ot[n]=dt(l),ot[n].c(),ot[n].m(R,null))}for(;n<ot.length;n+=1)ot[n].d(1);ot.length=st.length}if(66&e&&p(R,t[1]),4&e&&(J.checked=t[2]),288&e){let n;for(at=K(t[5]),n=0;n<at.length;n+=1){const l=ct(t,at,n);rt[n]?(rt[n].p(l,e),B(rt[n],1)):(rt[n]=ft(l),rt[n].c(),B(rt[n],1),rt[n].m(Q,null))}for(H(),n=at.length;n<rt.length;n+=1)bt(n);I()}if(16&e){let n;for($t=K(t[4]),n=0;n<$t.length;n+=1){const l=it(t,$t,n);mt[n]?mt[n].p(l,e):(mt[n]=ht(l),mt[n].c(),mt[n].m(tt,null))}for(;n<mt.length;n+=1)mt[n].d(1);mt.length=$t.length}},i(t){if(!et){for(let t=0;t<at.length;t+=1)B(rt[t]);et=!0}},o(t){rt=rt.filter(Boolean);for(let t=0;t<rt.length;t+=1)U(rt[t]);et=!1},d(t){t&&a(e),r(ot,t),r(rt,t),r(mt,t),nt=!1,k(lt)}}}function $t(t,e,n){let l,{tables:s=[]}=e,o="",a="+0",r="",i=!0,c=[],u=[...new Set(s.filter((t=>t.category)).map((t=>t.category)))].sort(((t,e)=>t.localeCompare(e)));function d(t){t+=Number(a),n(3,a=t<0?`${t}`:`+${t}`)}return t.$$set=t=>{"tables"in t&&n(9,s=t.tables)},t.$$.update=()=>{519&t.$$.dirty&&n(5,l=s.filter((t=>!r||t.category==r)).filter((t=>!i||t.topLevel)).filter((t=>!o||t.name.toLowerCase().includes(o.toLowerCase()))))},[o,r,i,a,c,l,u,d,function(t){n(4,c=rt.rollOnTable({table:t,modifier:a,tables:s}))},s,()=>d(-1),()=>d(1),()=>n(3,a="+0"),function(){o=this.value,n(0,o)},function(){r=g(this),n(1,r),n(6,u)},function(){i=this.checked,n(2,i)}]}const mt=class extends tt{constructor(t){super(),V(this,t,$t,bt,x,{tables:9})}};function pt(t){let e,n,l,r,d,m,p;return{c(){e=i("label"),n=i("span"),l=c(t[1]),r=u(),d=i("input"),h(n,"class","collapse"),h(d,"class","form-control"),h(d,"placeholder",t[1]),h(e,"class","form-group w-100 m-0")},m(a,i){o(a,e,i),s(e,n),s(n,l),s(e,r),s(e,d),$(d,t[0]),m||(p=f(d,"input",t[2]),m=!0)},p(t,[e]){2&e&&b(l,t[1]),2&e&&h(d,"placeholder",t[1]),1&e&&d.value!==t[0]&&$(d,t[0])},i:v,o:v,d(t){t&&a(e),m=!1,p()}}}function gt(t,e,n){let{label:l}=e,{value:s}=e;return t.$$set=t=>{"label"in t&&n(1,l=t.label),"value"in t&&n(0,s=t.value)},[s,l,function(){s=this.value,n(0,s)}]}const vt=class extends tt{constructor(t){super(),V(this,t,gt,pt,x,{label:1,value:0})}};function yt(t,e,n){const l=t.slice();return l[12]=e[n],l[13]=e,l[14]=n,l}function wt(t,e,n){const l=t.slice();return l[15]=e[n],l}function kt(t){let e,n,l,c,d,b,$,m,p=K(t[0].tables),g=[];for(let e=0;e<p.length;e+=1)g[e]=xt(yt(t,p,e));return{c(){e=i("div");for(let t=0;t<g.length;t+=1)g[t].c();n=u(),l=i("div"),c=i("button"),c.textContent="Add Table",d=u(),b=i("button"),b.textContent="Remove last table",h(c,"class","btn btn-light"),h(b,"class","btn btn-danger ml-1"),h(l,"class","d-flex mt-1"),h(e,"class","ml-2 p-2 border")},m(a,r){o(a,e,r);for(let t=0;t<g.length;t+=1)g[t]&&g[t].m(e,null);s(e,n),s(e,l),s(l,c),s(l,d),s(l,b),$||(m=[f(c,"click",t[4]),f(b,"click",t[5])],$=!0)},p(t,l){if(5&l){let s;for(p=K(t[0].tables),s=0;s<p.length;s+=1){const o=yt(t,p,s);g[s]?g[s].p(o,l):(g[s]=xt(o),g[s].c(),g[s].m(e,n))}for(;s<g.length;s+=1)g[s].d(1);g.length=p.length}},d(t){t&&a(e),r(g,t),$=!1,k(m)}}}function _t(t){let e,n,l,r=t[15].name+"";return{c(){e=i("option"),n=c(r),e.__value=l=t[15].id,$(e,e.__value)},m(t,l){o(t,e,l),s(e,n)},p(t,s){4&s&&r!==(r=t[15].name+"")&&b(n,r),4&s&&l!==(l=t[15].id)&&(e.__value=l,$(e,e.__value))},d(t){t&&a(e)}}}function xt(t){let e,n,l,c,d,b,m,g=K(t[2]),v=[];for(let e=0;e<g.length;e+=1)v[e]=_t(wt(t,g,e));function y(){t[10].call(c,t[13],t[14])}return{c(){e=i("label"),n=i("span"),n.textContent="Roll on table",l=u(),c=i("select"),d=i("option");for(let t=0;t<v.length;t+=1)v[t].c();h(n,"class","collapse"),d.__value="0",$(d,d.__value),h(c,"class","form-control"),void 0===t[12]&&O(y),h(e,"class","form-group w-100 m-0")},m(a,r){o(a,e,r),s(e,n),s(e,l),s(e,c),s(c,d);for(let t=0;t<v.length;t+=1)v[t]&&v[t].m(c,null);p(c,t[12],!0),b||(m=f(c,"change",y),b=!0)},p(e,n){if(t=e,4&n){let e;for(g=K(t[2]),e=0;e<g.length;e+=1){const l=wt(t,g,e);v[e]?v[e].p(l,n):(v[e]=_t(l),v[e].c(),v[e].m(c,null))}for(;e<v.length;e+=1)v[e].d(1);v.length=g.length}5&n&&p(c,t[12])},d(t){t&&a(e),r(v,t),b=!1,m()}}}function Ct(t){let e,n,l,r,d,$,m,p,g,v,y,w,_,x,C,T,S,E,M,N,O=t[3]?"Hide tables":"Show tables";function R(e){t[6](e)}let j={label:"Minimum"};function q(e){t[7](e)}void 0!==t[0].min&&(j.value=t[0].min),n=new vt({props:j}),L.push((()=>G(n,"value",R)));let D={label:"Maximum"};function J(e){t[8](e)}void 0!==t[0].max&&(D.value=t[0].max),d=new vt({props:D}),L.push((()=>G(d,"value",q)));let P={label:"Name"};void 0!==t[0].name&&(P.value=t[0].name),p=new vt({props:P}),L.push((()=>G(p,"value",J)));let z=t[3]&&kt(t);return{c(){e=i("div"),Z(n.$$.fragment),r=u(),Z(d.$$.fragment),m=u(),Z(p.$$.fragment),v=u(),y=i("div"),w=i("button"),_=c(O),x=u(),z&&z.c(),C=u(),T=i("div"),S=i("button"),S.textContent="Delete entry",h(w,"class","text-left btn btn-light w-100"),h(S,"class","btn btn-danger"),h(S,"title","delete"),h(T,"class","d-flex"),h(e,"class","m-1 p-2 border")},m(l,a){o(l,e,a),Q(n,e,null),s(e,r),Q(d,e,null),s(e,m),Q(p,e,null),s(e,v),s(e,y),s(y,w),s(w,_),s(y,x),z&&z.m(y,null),s(e,C),s(e,T),s(T,S),E=!0,M||(N=[f(w,"click",t[9]),f(S,"click",t[11])],M=!0)},p(t,[e]){const s={};!l&&1&e&&(l=!0,s.value=t[0].min,A((()=>l=!1))),n.$set(s);const o={};!$&&1&e&&($=!0,o.value=t[0].max,A((()=>$=!1))),d.$set(o);const a={};!g&&1&e&&(g=!0,a.value=t[0].name,A((()=>g=!1))),p.$set(a),(!E||8&e)&&O!==(O=t[3]?"Hide tables":"Show tables")&&b(_,O),t[3]?z?z.p(t,e):(z=kt(t),z.c(),z.m(y,null)):z&&(z.d(1),z=null)},i(t){E||(B(n.$$.fragment,t),B(d.$$.fragment,t),B(p.$$.fragment,t),E=!0)},o(t){U(n.$$.fragment,t),U(d.$$.fragment,t),U(p.$$.fragment,t),E=!1},d(t){t&&a(e),X(n),X(d),X(p),z&&z.d(),M=!1,k(N)}}}function Tt(t,e,n){let{entry:l}=e,{deleteEntry:s}=e,{allTables:o}=e,a=!1;return t.$$set=t=>{"entry"in t&&n(0,l=t.entry),"deleteEntry"in t&&n(1,s=t.deleteEntry),"allTables"in t&&n(2,o=t.allTables)},[l,s,o,a,()=>{n(0,l.tables=[...l.tables,0],l)},()=>{n(0,l.tables=[...l.tables.slice(0,l.tables.length-1)],l)},function(e){t.$$.not_equal(l.min,e)&&(l.min=e,n(0,l))},function(e){t.$$.not_equal(l.max,e)&&(l.max=e,n(0,l))},function(e){t.$$.not_equal(l.name,e)&&(l.name=e,n(0,l))},()=>n(3,a=!a),function(t,e){t[e]=g(this),n(0,l),n(2,o)},()=>s(l)]}const Lt=class extends tt{constructor(t){super(),V(this,t,Tt,Ct,x,{entry:0,deleteEntry:1,allTables:2})}},St="Changes saved successfully",Et={saveList:"All entries will be replaced with current list. All entries will have a minimum and maximum equal to their position in the list. This action is irreversible."};function Mt(t,e,n){const l=t.slice();return l[27]=e[n],l}function Nt(t){let e,n,l,r,d,$,m,p,g,v,y,w,_,x,C,T,S,E,M,N,O,R,j,q,D,J=t[4]?"Hide entries":"Show entries";function P(e){t[15](e)}let z={label:"Display Name"};function K(e){t[16](e)}void 0!==t[0].name&&(z.value=t[0].name),n=new vt({props:z}),L.push((()=>G(n,"value",P)));let W={label:"Category"};function F(e){t[17](e)}void 0!==t[0].category&&(W.value=t[0].category),d=new vt({props:W}),L.push((()=>G(d,"value",K)));let V={label:"Roll"};void 0!==t[0].roll&&(V.value=t[0].roll),p=new vt({props:V}),L.push((()=>G(p,"value",F)));let Y=t[4]&&Ot(t);return{c(){e=i("div"),Z(n.$$.fragment),r=u(),Z(d.$$.fragment),m=u(),Z(p.$$.fragment),v=u(),y=i("label"),w=i("input"),_=u(),x=i("span"),x.textContent="Top Level",C=u(),T=i("hr"),S=u(),E=i("button"),M=c(J),N=u(),Y&&Y.c(),O=u(),R=i("button"),R.textContent="Delete Table",h(w,"type","checkbox"),h(y,"class","form-group w-100"),h(E,"class","btn btn-light w-100 text-left border"),h(R,"class","btn btn-danger border"),h(e,"class","p-2 border")},m(l,a){o(l,e,a),Q(n,e,null),s(e,r),Q(d,e,null),s(e,m),Q(p,e,null),s(e,v),s(e,y),s(y,w),w.checked=t[0].topLevel,s(y,_),s(y,x),s(e,C),s(e,T),s(e,S),s(e,E),s(E,M),s(e,N),Y&&Y.m(e,null),s(e,O),s(e,R),j=!0,q||(D=[f(w,"change",t[18]),f(E,"click",t[19]),f(R,"click",t[25])],q=!0)},p(t,s){const o={};!l&&1&s&&(l=!0,o.value=t[0].name,A((()=>l=!1))),n.$set(o);const a={};!$&&1&s&&($=!0,a.value=t[0].category,A((()=>$=!1))),d.$set(a);const r={};!g&&1&s&&(g=!0,r.value=t[0].roll,A((()=>g=!1))),p.$set(r),1&s&&(w.checked=t[0].topLevel),(!j||16&s)&&J!==(J=t[4]?"Hide entries":"Show entries")&&b(M,J),t[4]?Y?(Y.p(t,s),16&s&&B(Y,1)):(Y=Ot(t),Y.c(),B(Y,1),Y.m(e,O)):Y&&(H(),U(Y,1,1,(()=>{Y=null})),I())},i(t){j||(B(n.$$.fragment,t),B(d.$$.fragment,t),B(p.$$.fragment,t),B(Y),j=!0)},o(t){U(n.$$.fragment,t),U(d.$$.fragment,t),U(p.$$.fragment,t),U(Y),j=!1},d(t){t&&a(e),X(n),X(d),X(p),Y&&Y.d(),q=!1,k(D)}}}function Ot(t){let e,n,l,r,d,b,$,m,p,g,v,y,w,_,x,C,T,L,S,E,M,N,O,A;const R=[jt,Rt,At],j=[];function q(t,e){return t[5]==t[8].designer?0:t[5]==t[8].list?1:t[5]==t[8].json?2:-1}return~(L=q(t))&&(S=j[L]=R[L](t)),{c(){e=i("button"),e.textContent="Add Entry",n=u(),l=i("button"),l.textContent="1 → N",r=u(),d=i("div"),b=i("button"),$=c("Designer"),p=u(),g=i("button"),v=c("List"),w=u(),_=i("button"),x=c("JSON"),T=u(),S&&S.c(),E=u(),M=i("hr"),h(e,"class","btn btn-light border"),h(l,"class","btn btn-light border"),h(b,"class",m="btn btn-light "+(t[5]==t[8].designer?"active":"")),h(g,"class",y="btn btn-light "+(t[5]==t[8].list?"active":"")),h(_,"class",C="btn btn-light "+(t[5]==t[8].json?"active":"")),h(d,"class","btn-group")},m(a,i){o(a,e,i),o(a,n,i),o(a,l,i),o(a,r,i),o(a,d,i),s(d,b),s(b,$),s(d,p),s(d,g),s(g,v),s(d,w),s(d,_),s(_,x),o(a,T,i),~L&&j[L].m(a,i),o(a,E,i),o(a,M,i),N=!0,O||(A=[f(e,"click",t[9]),f(l,"click",t[13]),f(b,"click",t[20]),f(g,"click",t[21]),f(_,"click",t[22])],O=!0)},p(t,e){(!N||32&e&&m!==(m="btn btn-light "+(t[5]==t[8].designer?"active":"")))&&h(b,"class",m),(!N||32&e&&y!==(y="btn btn-light "+(t[5]==t[8].list?"active":"")))&&h(g,"class",y),(!N||32&e&&C!==(C="btn btn-light "+(t[5]==t[8].json?"active":"")))&&h(_,"class",C);let n=L;L=q(t),L===n?~L&&j[L].p(t,e):(S&&(H(),U(j[n],1,1,(()=>{j[n]=null})),I()),~L?(S=j[L],S?S.p(t,e):(S=j[L]=R[L](t),S.c()),B(S,1),S.m(E.parentNode,E)):S=null)},i(t){N||(B(S),N=!0)},o(t){U(S),N=!1},d(t){t&&(a(e),a(n),a(l),a(r),a(d),a(T),a(E),a(M)),~L&&j[L].d(t),O=!1,k(A)}}}function At(t){let e,n,l,s,r;return{c(){e=i("button"),e.textContent="Save",n=u(),l=i("textarea"),h(e,"class","btn btn-light ml-1"),h(l,"tabindex","0"),h(l,"contenteditable","true"),h(l,"class","form-control w-100"),m(l,"font-family","monospace"),m(l,"font-size","small"),m(l,"height","30em"),m(l,"resize","none")},m(a,i){o(a,e,i),o(a,n,i),o(a,l,i),$(l,t[6]),s||(r=[f(e,"click",t[11]),f(l,"input",t[24])],s=!0)},p(t,e){64&e&&$(l,t[6])},i:v,o:v,d(t){t&&(a(e),a(n),a(l)),s=!1,k(r)}}}function Rt(t){let e,n,l,s,r;return{c(){e=i("button"),e.textContent="Save",n=u(),l=i("textarea"),h(e,"class","btn btn-light ml-1"),h(l,"tabindex","0"),h(l,"contenteditable","true"),h(l,"class","form-control w-100"),m(l,"font-family","monospace"),m(l,"font-size","small"),m(l,"height","30em"),m(l,"resize","none")},m(a,i){o(a,e,i),o(a,n,i),o(a,l,i),$(l,t[7]),s||(r=[f(e,"click",t[12]),f(l,"input",t[23])],s=!0)},p(t,e){128&e&&$(l,t[7])},i:v,o:v,d(t){t&&(a(e),a(n),a(l)),s=!1,k(r)}}}function jt(t){let e,n,l,r,c,d=[],f=new Map,b=K(t[0].entries);const $=t=>t[27].id;for(let e=0;e<b.length;e+=1){let n=Mt(t,b,e),l=$(n);f.set(l,d[e]=qt(l,n))}return{c(){e=i("table"),n=i("thead"),n.innerHTML="<tr><th>Item</th></tr>",l=u(),r=i("tbody");for(let t=0;t<d.length;t+=1)d[t].c();h(n,"class","collapse"),h(e,"class","table table-striped")},m(t,a){o(t,e,a),s(e,n),s(e,l),s(e,r);for(let t=0;t<d.length;t+=1)d[t]&&d[t].m(r,null);c=!0},p(t,e){1027&e&&(b=K(t[0].entries),H(),d=F(d,e,$,1,t,b,f,r,W,qt,null,Mt),I())},i(t){if(!c){for(let t=0;t<b.length;t+=1)B(d[t]);c=!0}},o(t){for(let t=0;t<d.length;t+=1)U(d[t]);c=!1},d(t){t&&a(e);for(let t=0;t<d.length;t+=1)d[t].d()}}}function qt(t,e){let n,l,r,c;return l=new Lt({props:{entry:e[27],deleteEntry:e[10],allTables:e[1]}}),{key:t,first:null,c(){n=i("tr"),Z(l.$$.fragment),r=u(),this.first=n},m(t,e){o(t,n,e),Q(l,n,null),s(n,r),c=!0},p(t,n){e=t;const s={};1&n&&(s.entry=e[27]),2&n&&(s.allTables=e[1]),l.$set(s)},i(t){c||(B(l.$$.fragment,t),c=!0)},o(t){U(l.$$.fragment,t),c=!1},d(t){t&&a(n),X(l)}}}function Dt(t){let e,n,l,r,d,$,m,p=t[0].name+"",g=t[3]&&Nt(t);return{c(){e=i("div"),n=i("button"),l=c(p),r=u(),g&&g.c(),h(n,"class","text-left btn btn-light border w-100"),h(e,"class","w-100 mb-1")},m(a,i){o(a,e,i),s(e,n),s(n,l),s(e,r),g&&g.m(e,null),d=!0,$||(m=f(n,"click",t[14]),$=!0)},p(t,[n]){(!d||1&n)&&p!==(p=t[0].name+"")&&b(l,p),t[3]?g?(g.p(t,n),8&n&&B(g,1)):(g=Nt(t),g.c(),B(g,1),g.m(e,null)):g&&(H(),U(g,1,1,(()=>{g=null})),I())},i(t){d||(B(g),d=!0)},o(t){U(g),d=!1},d(t){t&&a(e),g&&g.d(),$=!1,m()}}}function Jt(t,e,n){let{table:l}=e,{allTables:s}=e,{deleteTable:o}=e;const a={designer:"designer",json:"json",list:"list"};let r=!1,i=!1,c=a.designer,u=JSON.stringify(l.entries,null,2),d=l.entries.map((t=>t.name)).reduce(((t,e)=>`${t}${e}\n`),""),f=()=>{n(5,c=a.designer),n(0,l),alert(St)};return t.$$set=t=>{"table"in t&&n(0,l=t.table),"allTables"in t&&n(1,s=t.allTables),"deleteTable"in t&&n(2,o=t.deleteTable)},[l,s,o,r,i,c,u,d,a,()=>{let t=0==l.entries.length?1:Math.max(...l.entries.map((t=>t.id)))+1,e=0==l.entries.length?1:Math.max(...l.entries.map((t=>t.max)))+1;n(0,l.entries=[{id:t,name:"",min:e,max:e,tables:[]},...l.entries],l),n(0,l)},t=>{let e=l.entries.indexOf(t);n(0,l.entries=[...l.entries.slice(0,e),...l.entries.slice(e+1,l.entries.length)],l),n(0,l)},()=>{try{let t=JSON.parse(u);t.forEach(((t,e)=>{t.min=t.min?t.min:e+1,t.max=t.max?t.max:e+1,t.name=t.name?t.name:"New entry",t.tables=t.tables?t.tables:[]})),n(0,l.entries=t,l),f()}catch(t){alert(t)}},()=>{confirm(Et.saveList)&&(n(0,l.entries=d.split("\n").filter((t=>t)).map(((t,e)=>({min:e+1,max:e+1,name:t,tables:[]}))),l),f())},()=>{l.entries.sort(((t,e)=>t.min-e.min)),n(0,l),n(0,l)},()=>n(3,r=!r),function(e){t.$$.not_equal(l.name,e)&&(l.name=e,n(0,l))},function(e){t.$$.not_equal(l.category,e)&&(l.category=e,n(0,l))},function(e){t.$$.not_equal(l.roll,e)&&(l.roll=e,n(0,l))},function(){l.topLevel=this.checked,n(0,l)},()=>n(4,i=!i),()=>n(5,c=a.designer),()=>n(5,c=a.list),()=>n(5,c=a.json),function(){d=this.value,n(7,d)},function(){u=this.value,n(6,u)},()=>o(l)]}const Pt=class extends tt{constructor(t){super(),V(this,t,Jt,Dt,x,{table:0,allTables:1,deleteTable:2})}};function zt(t,e,n){const l=t.slice();return l[15]=e[n],l}function Ht(t,e,n){const l=t.slice();return l[18]=e[n],l}function It(t){let e,n,l,r=t[18]+"";return{c(){e=i("option"),n=c(r),e.__value=l=t[18],$(e,e.__value)},m(t,l){o(t,e,l),s(e,n)},p(t,s){128&s&&r!==(r=t[18]+"")&&b(n,r),128&s&&l!==(l=t[18])&&(e.__value=l,$(e,e.__value))},d(t){t&&a(e)}}}function Bt(t,e){let n,l,s;return l=new Pt({props:{table:e[15],allTables:e[0],deleteTable:e[9]}}),{key:t,first:null,c(){n=d(),Z(l.$$.fragment),this.first=n},m(t,e){o(t,n,e),Q(l,t,e),s=!0},p(t,n){e=t;const s={};64&n&&(s.table=e[15]),1&n&&(s.allTables=e[0]),l.$set(s)},i(t){s||(B(l.$$.fragment,t),s=!0)},o(t){U(l.$$.fragment,t),s=!1},d(t){t&&a(n),X(l,t)}}}function Ut(t){let e,n,l,c,d,b,m,g,v,y,w,x,C,T,S,E,M,N,R,j,q,D,J,P,z,V,Y,tt,et,nt,lt=[],st=new Map;function ot(e){t[12](e)}let at={label:"Filter"};void 0!==t[4]&&(at.value=t[4]),C=new vt({props:at}),L.push((()=>G(C,"value",ot)));let rt=K(t[7]),it=[];for(let e=0;e<rt.length;e+=1)it[e]=It(Ht(t,rt,e));let ct=K(t[6]);const ut=t=>t[15].id;for(let e=0;e<ct.length;e+=1){let n=zt(t,ct,e),l=ut(n);st.set(l,lt[e]=Bt(l,n))}return{c(){e=i("div"),n=i("button"),n.textContent="A → Z",l=u(),c=i("button"),c.textContent="Z → A",d=u(),b=i("button"),b.textContent="Add Table",m=u(),g=i("button"),g.textContent="Reset",v=u(),y=i("button"),y.textContent="Delete All",w=u(),x=i("div"),Z(C.$$.fragment),S=u(),E=i("label"),M=i("span"),M.textContent="Category filter",N=u(),R=i("select"),j=i("option");for(let t=0;t<it.length;t+=1)it[t].c();q=u(),D=i("label"),J=i("input"),P=u(),z=i("span"),z.textContent="Top Level Only",V=u(),Y=i("div");for(let t=0;t<lt.length;t+=1)lt[t].c();h(n,"class","btn btn-light"),h(c,"class","btn btn-light"),h(b,"class","btn btn-light"),h(g,"class","btn btn-danger"),h(y,"class","btn btn-danger"),h(e,"class","m-2 p-2 border"),h(M,"class","collapse"),j.__value="",$(j,j.__value),h(R,"class","form-control"),void 0===t[3]&&O((()=>t[13].call(R))),h(E,"class","form-group w-100 m-0"),h(J,"type","checkbox"),h(D,"class","form-group w-100"),h(x,"class","m-2 p-2 border"),h(Y,"class","p-2")},m(a,r){o(a,e,r),s(e,n),s(e,l),s(e,c),s(e,d),s(e,b),s(e,m),s(e,g),s(e,v),s(e,y),o(a,w,r),o(a,x,r),Q(C,x,null),s(x,S),s(x,E),s(E,M),s(E,N),s(E,R),s(R,j);for(let t=0;t<it.length;t+=1)it[t]&&it[t].m(R,null);p(R,t[3],!0),s(x,q),s(x,D),s(D,J),J.checked=t[5],s(D,P),s(D,z),o(a,V,r),o(a,Y,r);for(let t=0;t<lt.length;t+=1)lt[t]&&lt[t].m(Y,null);tt=!0,et||(nt=[f(n,"click",t[10]),f(c,"click",t[11]),f(b,"click",t[8]),f(g,"click",(function(){_(t[1])&&t[1].apply(this,arguments)})),f(y,"click",(function(){_(t[2])&&t[2].apply(this,arguments)})),f(R,"change",t[13]),f(J,"change",t[14])],et=!0)},p(e,[n]){t=e;const l={};if(!T&&16&n&&(T=!0,l.value=t[4],A((()=>T=!1))),C.$set(l),128&n){let e;for(rt=K(t[7]),e=0;e<rt.length;e+=1){const l=Ht(t,rt,e);it[e]?it[e].p(l,n):(it[e]=It(l),it[e].c(),it[e].m(R,null))}for(;e<it.length;e+=1)it[e].d(1);it.length=rt.length}136&n&&p(R,t[3]),32&n&&(J.checked=t[5]),577&n&&(ct=K(t[6]),H(),lt=F(lt,n,ut,1,t,ct,st,Y,W,Bt,null,zt),I())},i(t){if(!tt){B(C.$$.fragment,t);for(let t=0;t<ct.length;t+=1)B(lt[t]);tt=!0}},o(t){U(C.$$.fragment,t);for(let t=0;t<lt.length;t+=1)U(lt[t]);tt=!1},d(t){t&&(a(e),a(w),a(x),a(V),a(Y)),X(C),r(it,t);for(let t=0;t<lt.length;t+=1)lt[t].d();et=!1,k(nt)}}}function Kt(t,e,n){let l,s,{tables:o}=e,{reset:a}=e,{deleteAll:r}=e,i="",c="",u=!1;return t.$$set=t=>{"tables"in t&&n(0,o=t.tables),"reset"in t&&n(1,a=t.reset),"deleteAll"in t&&n(2,r=t.deleteAll)},t.$$.update=()=>{1&t.$$.dirty&&n(7,l=[...new Set(o.filter((t=>t.category)).map((t=>t.category)))].sort(((t,e)=>t.localeCompare(e)))),57&t.$$.dirty&&n(6,s=o.filter((t=>!u||t.topLevel)).filter((t=>!i||t.category==i)).filter((t=>!c||t.name.toLowerCase().includes(c.toLowerCase()))))},[o,a,r,i,c,u,s,l,()=>{let t=Math.max(...o.map((t=>t.id)))+1;n(0,o=[{id:t,name:"New Table",category:"",roll:"",topLevel:!1,entries:[]},...o])},t=>{if(!confirm(`Delete ${t.name}? This action is irreversible.`))return;let e=o.indexOf(t);n(0,o=[...o.slice(0,e),...o.slice(e+1,o.length)])},()=>{o.sort(((t,e)=>t.name.localeCompare(e.name))),n(0,o)},()=>{o.sort(((t,e)=>e.name.localeCompare(t.name))),n(0,o)},function(t){c=t,n(4,c)},function(){i=g(this),n(3,i),n(7,l),n(0,o)},function(){u=this.checked,n(5,u)}]}const Wt=class extends tt{constructor(t){super(),V(this,t,Kt,Ut,x,{tables:0,reset:1,deleteAll:2})}};class Ft{constructor(t={url:""}){this.url=t.url}async get(t=""){return new Promise((e=>{let n=new XMLHttpRequest;n.open("get",`${this.url}${t}`),n.onload=()=>{n.status>299?e():e(n.response)},n.send()}))}}const Gt="knave2e-gm-tools-tables";class Zt{constructor(){this.tables=[],this.client=new Ft,this.done=!1}async loadData(){if(this.tables.length>0)return;let t=localStorage.getItem(Gt);if(t)try{return this.tables=JSON.parse(t),void(this.done=!0)}catch{alert("Could not parse stored tables, loading default tables.")}await this.reset()}async reset(){let t=await this.client.get("seed.json");this.tables=JSON.parse(t),this.done=!0}save(){localStorage.setItem(Gt,JSON.stringify(this.tables)),alert("Saved current tables")}}const Qt=new URLSearchParams(window.location.search).get("theme")??(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");function Xt(t){window.location.search=`theme=${t}`}function Vt(t){let e;return{c(){e=i("link"),h(e,"rel","stylesheet"),h(e,"href","https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css"),h(e,"integrity","sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn"),h(e,"crossorigin","anonymous")},m(t,n){o(t,e,n)},d(t){t&&a(e)}}}function Yt(t){let e;return{c(){e=i("link"),h(e,"rel","stylesheet"),h(e,"href","https://cdn.jsdelivr.net/gh/vinorodrigues/bootstrap-dark@0.6.1/dist/bootstrap-dark.min.css")},m(t,n){o(t,e,n)},d(t){t&&a(e)}}}function te(t){let e,n,l;return{c(){e=i("a"),e.textContent="Dark mode",h(e,"class","nav-link"),h(e,"href","#")},m(s,a){o(s,e,a),n||(l=f(e,"click",t[12]),n=!0)},d(t){t&&a(e),n=!1,l()}}}function ee(t){let e,n,l;return{c(){e=i("a"),e.textContent="Light mode",h(e,"class","nav-link"),h(e,"href","#")},m(s,a){o(s,e,a),n||(l=f(e,"click",t[11]),n=!0)},d(t){t&&a(e),n=!1,l()}}}function ne(t){let e,n,l;function s(e){t[14](e)}let o={reset:t[3],deleteAll:t[4]};return void 0!==t[1].tables&&(o.tables=t[1].tables),e=new Wt({props:o}),L.push((()=>G(e,"tables",s))),{c(){Z(e.$$.fragment)},m(t,n){Q(e,t,n),l=!0},p(t,l){const s={};!n&&2&l&&(n=!0,s.tables=t[1].tables,A((()=>n=!1))),e.$set(s)},i(t){l||(B(e.$$.fragment,t),l=!0)},o(t){U(e.$$.fragment,t),l=!1},d(t){X(e,t)}}}function le(t){let e,n,l,r,c,d,f,b;function $(e){t[13](e)}let m={};return void 0!==t[1].tables&&(m.tables=t[1].tables),d=new mt({props:m}),L.push((()=>G(d,"tables",$))),{c(){e=i("div"),n=i("div"),n.innerHTML='<div class="col"><h1>Table Roller</h1></div>',l=u(),r=i("hr"),c=u(),Z(d.$$.fragment),h(n,"class","row"),h(e,"class","p-2")},m(t,a){o(t,e,a),s(e,n),s(e,l),s(e,r),s(e,c),Q(d,e,null),b=!0},p(t,e){const n={};!f&&2&e&&(f=!0,n.tables=t[1].tables,A((()=>f=!1))),d.$set(n)},i(t){b||(B(d.$$.fragment,t),b=!0)},o(t){U(d.$$.fragment,t),b=!1},d(t){t&&a(e),X(d)}}}function se(t){let e;return{c(){e=c("Loading table data...")},m(t,n){o(t,e,n)},p:v,i:v,o:v,d(t){t&&a(e)}}}function oe(t){let e,n,l,r,c,b,$,m,p,g,v,y,w,_,x,C,T,L,S,E,M,N,O,A,R,j,q,D,J,P,z,K,W,F,G,Z,Q,X=("dark"==Qt?Yt:Vt)(t),V=("dark"==Qt?ee:te)(t);const Y=[se,le,ne],tt=[];function et(t,e){return t[1]&&t[1].done?"tables"==t[0]?1:"manager"==t[0]?2:-1:0}return~(W=et(t))&&(F=tt[W]=Y[W](t)),{c(){e=i("link"),X.c(),n=d(),l=u(),r=i("main"),c=i("nav"),b=i("a"),b.textContent="Knave 2e GM Tools",$=u(),m=i("button"),m.innerHTML='<span class="navbar-toggler-icon"></span>',p=u(),g=i("div"),v=i("ul"),y=i("li"),w=i("a"),w.textContent="Table Roller",x=u(),C=i("li"),T=i("a"),T.textContent="Table Manager",S=u(),E=i("li"),M=i("a"),M.textContent="Import Tables",N=u(),O=i("li"),A=i("a"),A.textContent="Export Tables",R=u(),j=i("li"),q=i("a"),q.textContent="Save Tables",D=u(),J=i("ul"),P=i("li"),V.c(),K=u(),F&&F.c(),h(e,"rel","stylesheet"),h(e,"href","global.css"),h(b,"class","navbar-brand"),h(b,"href","#"),h(m,"class","navbar-toggler"),h(m,"type","button"),h(m,"aria-controls","navbarSupportedContent"),h(m,"aria-expanded","false"),h(m,"aria-label","Toggle navigation"),h(w,"class","nav-link"),h(w,"href","#"),h(y,"class",_="nav-item "+("tables"==t[0]?"active":"")),h(T,"class","nav-link"),h(T,"href","#"),h(C,"class",L="nav-item "+("manager"==t[0]?"active":"")),h(M,"class","nav-link"),h(M,"href","#"),h(E,"class","nav-item"),h(A,"class","nav-link"),h(A,"href","#"),h(O,"class","nav-item"),h(q,"class","nav-link"),h(q,"href","#"),h(j,"class","nav-item"),h(v,"class","navbar-nav mr-auto"),h(P,"class","nav-item"),h(J,"class","navbar-nav ml-auto"),h(g,"class",z=(t[2]?"":"collapse")+" navbar-collapse"),h(c,"class","navbar navbar-expand-lg navbar-light bg-light"),h(r,"id","app")},m(a,i){s(document.head,e),X.m(document.head,null),s(document.head,n),o(a,l,i),o(a,r,i),s(r,c),s(c,b),s(c,$),s(c,m),s(c,p),s(c,g),s(g,v),s(v,y),s(y,w),s(v,x),s(v,C),s(C,T),s(v,S),s(v,E),s(E,M),s(v,N),s(v,O),s(O,A),s(v,R),s(v,j),s(j,q),s(g,D),s(g,J),s(J,P),V.m(P,null),s(r,K),~W&&tt[W].m(r,null),G=!0,Z||(Q=[f(m,"click",t[6]),f(w,"click",t[7]),f(T,"click",t[8]),f(M,"click",t[5]),f(A,"click",t[9]),f(q,"click",t[10])],Z=!0)},p(t,[e]){(!G||1&e&&_!==(_="nav-item "+("tables"==t[0]?"active":"")))&&h(y,"class",_),(!G||1&e&&L!==(L="nav-item "+("manager"==t[0]?"active":"")))&&h(C,"class",L),(!G||4&e&&z!==(z=(t[2]?"":"collapse")+" navbar-collapse"))&&h(g,"class",z);let n=W;W=et(t),W===n?~W&&tt[W].p(t,e):(F&&(H(),U(tt[n],1,1,(()=>{tt[n]=null})),I()),~W?(F=tt[W],F?F.p(t,e):(F=tt[W]=Y[W](t),F.c()),B(F,1),F.m(r,null)):F=null)},i(t){G||(B(F),G=!0)},o(t){U(F),G=!1},d(t){t&&(a(l),a(r)),a(e),X.d(t),a(n),V.d(),~W&&tt[W].d(),Z=!1,k(Q)}}}function ae(t,e,l){let s,o="tables",a=!1;var r;return r=async()=>{l(1,s=new Zt),await s.loadData(),l(1,s)},function(){if(!n)throw new Error("Function called outside component initialization");return n}().$$.on_mount.push(r),[o,s,a,async()=>{confirm("Reset tables and load default table set? Any unsaved changes will be lost.")&&(await s.reset(),l(1,s))},()=>{confirm("Delete all tables? Any unsaved changes will be lost.")&&(l(1,s.tables=[],s),l(1,s))},()=>{confirm("Delete existing tables?")&&l(1,s.tables=[],s),(t=>{let e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=e=>{e.target.files[0].text().then((e=>{t(JSON.parse(e))}))},e.click()})((t=>{let e=0==s.tables.length?1:Math.max(...s.tables.map((t=>t.id)))+1,n=[];t.forEach((t=>{n.push({oldId:t.id,newId:e}),t.id=e++})),t.reduce(((t,e)=>[...t,...e.entries]),[]).forEach((t=>{t.tables=t.tables.map((t=>n.find((e=>e.oldId==t))?.newId??t))})),l(1,s.tables=[...s.tables,...t],s)}))},()=>l(2,a=!a),()=>l(0,o="tables"),()=>l(0,o="manager"),()=>(t=>{let e=URL.createObjectURL(new Blob([JSON.stringify(t)])),n=document.createElement("a");n.href=e,n.download="knave-tables.json",n.click()})(s.tables),()=>s.save(),()=>Xt("light"),()=>Xt("dark"),function(e){t.$$.not_equal(s.tables,e)&&(s.tables=e,l(1,s))},function(e){t.$$.not_equal(s.tables,e)&&(s.tables=e,l(1,s))}]}new class extends tt{constructor(t){super(),V(this,t,ae,oe,x,{})}}({target:document.body,props:{}})})();